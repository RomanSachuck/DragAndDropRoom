# DragAndDropRoom
Version: Unity 6000.0.24f1

1) Входной точкой в игру является класс Infrastracture/Bootstrapper. Здесь происходит регистрация сервисов и раздаются основные зависимости.
   
2) После всех регистраций, Bootstrapper запускает GameLoop у класса Infrastracture/Game.
В текущей задаче, класс Game просто создает DropObject через фабрику и следит за событиями PointerDown и PointerUp у созданного объекта. 
Это необходимо, чтобы выключать и выключать объект ScreenScrollInputHandler, запрещая скролинг по экрану, когда игрок схватился за DropObject.

3)Основная игровая логика происходит в классах из папки "DragAndDropSystem". 
Система работает примерно так: 
DropObject, при помощи EventTriggerExample, следит за тем когда его хватают и отпускают.
Когда DropOject схвачен, он включает класс FollowToCursor, в котором описана логика следования за курсором.
Когда DropObject был отпущен, он выключает FollowToCursor и обращается к классу DropController, чтобы совершить падение в нужное место.

В классе DropController возможны три основных развития событий:
  - Объект находится внутри коллайдера на который можно упасть.
  - Объект не находится внутри коллайдера, но снизу от него есть подходящий коллайдер
  - Объект не находится внутри коллайдера, и снизу от него нет подходящего коллайдера

В первом случае, DropController определяет подходящую позицию на коллайдере и бросает объект туда при помощи DoTween.
Во втором случае, DropController ищет коллайдер снизу объекта, определяет на нем нужную позицию и бросает объект туда при помощи DoTween.
В третьем случае, DropController ищет близжайший коллайдер во всех направлениях, определяет нужную позицию на найденном коллайдере и бросает объект туда при помощи DoTween.

4)Логика скролинга по экрану находится в папке "CameraLogic", там все просто. 
Класс CameraMove двигает камеру по оси Х и определяет крайние возможные положения.
Так же, этот класс следит за изменениями экрана, чтобы пересчитать крайние положения при необходимости (актуально для браузерных игр, где игроки могут изменять размер вкладки).
Класс ScreenScrollInputHandler - это просто связующее звено между InputService и CameraMove.

5)Инпут сервисы лежат в папке Infrastracture/Services/InputService. 
Там реализовано два варианта инпута: для пк и для мобилок. Реализации имеют общий интерфейс IInput, поэтому их легко подменять.
